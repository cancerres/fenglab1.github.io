/* =========================================================
   FENG LAB — custom.css (FINAL)
   - Dark site theme (black background / white text)
   - Publication featured cards: equal height + stable grid
   - Members page: larger columns, larger photos, visible text
   - Menu: clean dark header + gold hover/active
========================================================= */


/* ===============================
   Header / Lab Caption
================================ */

.zlab_caption {
  font-size: calc(40px + (50 - 40) * ((100vw - 400px) / (800 - 400)));
  margin-top: 50px;
  margin-bottom: 30px;
}


/* ===============================
   Theme Link Brackets Tweaks
================================ */

a.mfn-link-1:before {
  margin-right: 0;
  content: '[';
  transform: translateX(20px);
}

a.mfn-link-1:after {
  margin-left: 0;
  content: ']';
  transform: translateX(-20px);
}


/* ===============================
   General Typography
================================ */

.project-text {
  font-size: 18px;
  line-height: 1.7;
}

.project-title {
  font-size: 24px;
  margin-bottom: 60px;
  text-align: center;
}

.section-title {
  font-size: 24px;
  margin-bottom: 20px;
  text-align: left;
}


/* =========================================================
   GLOBAL DARK THEME (site-wide)
========================================================= */

html, body {
  background: #0b0b0b !important;
  color: #e0e0e0 !important;
}

/* General text */
p, li, ul, ol, span, div {
  color: #e0e0e0;
}

h1, h2, h3, h4, h5, h6 {
  color: #ffffff !important;
}

/* Links */
a { color: #d4b15f; }
a:hover { color: #f2d37a; }

/* Main wrappers dark */
#Wrapper,
#Header_wrapper,
#Header,
#Top_bar,
#Subheader,
#Content,
#Footer,
.footer_copy,
.section_wrapper,
.content_wrapper {
  background: #0b0b0b !important;
  color: #e0e0e0 !important;
}

/* Rules */
hr {
  border-color: rgba(255,255,255,0.15) !important;
}

/* Slightly soften images on dark */
img {
  filter: brightness(0.97) contrast(1.02);
}


/* =========================================================
   HARD FIX: Remove WHITE STRIP / WHITE HEADER BACKGROUND
   (fixes the “publication-only white band” screenshot)
========================================================= */

/* Force header region to dark, including theme containers */
#Header_wrapper,
#Header,
#Top_bar,
#Top_bar .container,
#Top_bar .column,
#Top_bar .top_bar_left,
#Top_bar .menu_wrapper,
#Top_bar .menu-main-menu-container,
#Top_bar .logo,
#Top_bar .menu,
#Top_bar ul,
#Top_bar li,
#Top_bar nav {
  background-color: #0b0b0b !important;
}

/* Theme sometimes uses pseudo-elements for bars */
#Header_wrapper:before,
#Header_wrapper:after,
#Header:before,
#Header:after,
#Top_bar:before,
#Top_bar:after {
  background: transparent !important;
}

/* Kill any “white panel” blocks inside header */
#Top_bar * {
  background-color: transparent !important;
}

/* Put back one intentional divider */
#Top_bar {
  border-bottom: 1px solid rgba(255,255,255,0.08) !important;
}


/* =========================================================
   TOP MENU — clean + restore gold hover/active
========================================================= */

#menu > ul > li > a,
#menu > ul > li > a span {
  color: #e0e0e0 !important;
  font-weight: 500;
  letter-spacing: 0.4px;
  transition: color 0.2s ease;
}

/* Remove theme hover backgrounds */
#menu > ul > li:hover > a {
  background: transparent !important;
}

/* Gold hover + current */
#menu > ul > li > a:hover,
#menu > ul > li.current_page_item > a,
#menu > ul > li.current_page_item > a span {
  color: #d4b15f !important;
}

/* Underline animation */
#menu > ul > li > a span {
  position: relative;
  display: inline-block;
}

#menu > ul > li > a span:after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -6px;
  width: 0;
  height: 2px;
  background: #d4b15f;
  transition: width 0.25s ease;
}

#menu > ul > li > a:hover span:after,
#menu > ul > li.current_page_item > a span:after {
  width: 100%;
}

/* Menu padding */
#menu > ul > li > a {
  padding: 18px 14px !important;
}

.responsive-menu-toggle i {
  color: #e0e0e0 !important;
}


/* =========================================================
   SITE WIDTH CONTROL (safe)
========================================================= */

.container,
.section_wrapper,
.content_wrapper {
  width: 100%;
  max-width: 1400px;
  margin-left: auto;
  margin-right: auto;
}


/* =========================================================
   FEATURED PUBLICATIONS (grid + equal height)
   Fixes:
   - cards overlapping/stacking
   - equal height
   - keep cards light while page is dark
   - restore gold title
========================================================= */

/* Grid wrapper */
.featured-grid {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(300px, 1fr));
  gap: 40px;
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
  align-items: stretch; /* equal-height row behavior */
}

/* Neutralize theme column floats/padding inside our grid */
.featured-grid > .column {
  float: none !important;
  width: auto !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box;
  display: flex !important;
  align-items: stretch !important;
}

/* If theme wraps stuff with column_attr, make it stretch */
.featured-grid > .column .column_attr {
  width: 100%;
}

/* Whole-card link wrapper must be block and stretch */
.featured-link {
  display: flex;
  width: 100%;
  text-decoration: none !important;
  align-items: stretch;
}

/* The card */
.featured-card {
  background: #ffffff !important;
  padding: 26px;
  border-radius: 18px;
  border: 1px solid rgba(0,0,0,0.06);
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
  transition: transform 0.18s ease, box-shadow 0.18s ease;

  display: flex;
  flex-direction: column;

  width: 100%;
  height: 100%;
}

/* Hover */
.featured-link:hover .featured-card {
  transform: translateY(-4px);
  box-shadow: 0 18px 42px rgba(0,0,0,0.14);
}

/* Cover image */
.featured-card .cover {
  width: 100%;
  height: 320px;
  object-fit: contain;
  background: #fff;
  display: block;
  border-radius: 14px;
  margin-bottom: 18px;
  filter: none; /* don’t dim inside white card */
}

/* Featured title (restore gold!) */
.featured-card .pub-title {
  font-size: 1.35em;
  line-height: 1.3;
  font-weight: 700;
  color: #c89a2b !important; /* dark gold */
  margin: 0 0 14px 0;

  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.featured-link:hover .pub-title {
  color: #a87f1f !important;
}

/* Authors / meta (dark text inside card) */
.featured-card .pub-authors {
  font-size: 1.1em;
  line-height: 1.6;
  margin: 0 0 10px 0;
  color: #555 !important;
}

.featured-card .pub-meta {
  font-size: 1.1em;
  font-weight: 600;
  color: #333 !important;
  margin-top: auto; /* pin to bottom */
}

/* Responsive */
@media (max-width: 1100px) {
  .featured-grid {
    grid-template-columns: repeat(2, minmax(260px, 1fr)) !important;
  }
}

@media (max-width: 720px) {
  .featured-grid {
    grid-template-columns: 1fr !important;
  }
  .featured-card .cover {
    height: 280px;
  }
}


/* =========================================================
   MEMBERS PAGE: wider columns + bigger photos + readable text
========================================================= */

/* Wider team “columns” (theme uses floats; override carefully) */
.column_our_team {
  width: 42% !important;
  margin-left: 4% !important;
  margin-right: 4% !important;
  float: left !important;
}

/* Make sure row can contain floated children */
.items_group:after {
  content: "";
  display: block;
  clear: both;
}

/* Smaller screens: one per row */
@media (max-width: 1100px) {
  .column_our_team {
    width: 80% !important;
    margin-left: auto !important;
    margin-right: auto !important;
    float: none !important;
  }
}

/* Photo frame larger */
.column_our_team .image_frame {
  transform: none !important;
  width: 280px !important;
  height: 280px !important;
  margin: 0 auto !important;
}

/* Image fill */
.column_our_team .image_wrapper img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  margin-left: 0 !important;
  max-width: none !important;
}

/* Ensure truly circular */
.column_our_team .image_frame,
.column_our_team .image_wrapper,
.column_our_team img {
  border-radius: 50% !important;
}

/* Members text must be visible on dark */
.column_our_team,
.column_our_team * {
  color: #e0e0e0 !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* Typography scale similar to Home rules */
.column_our_team h4 {
  font-size: calc(22px + (30 - 22) * ((100vw - 400px) / (1200 - 400))) !important;
  line-height: 1.15 !important;
  font-weight: 700 !important;
  margin-bottom: 10px !important;
}

.column_our_team .subtitle {
  font-size: calc(16px + (20 - 16) * ((100vw - 400px) / (1200 - 400))) !important;
  line-height: 1.45 !important;
  color: #cfcfcf !important;
}

.column_our_team .desc {
  font-size: calc(16px + (19 - 16) * ((100vw - 400px) / (1200 - 400))) !important;
  line-height: 1.6 !important;
  color: #e0e0e0 !important;
}

/* Divider line */
.column_our_team .hr_color {
  border-color: rgba(255,255,255,0.18) !important;
  margin: 14px 0 !important;
}

/* Alumni / Join Us blocks (use .column_attr.big) */
.column_attr.big,
.column_attr.big p,
.column_attr.big ul,
.column_attr.big li {
  font-size: calc(16px + (19 - 16) * ((100vw - 400px) / (1200 - 400))) !important;
  line-height: 1.7 !important;
  color: #e0e0e0 !important;
}

/* Those blocks use <ul> with <br> */
.column_attr.big ul {
  list-style: none !important;
  padding-left: 0 !important;
  margin-left: 0 !important;
}

/* Email icon */
.column_our_team .icon_bar i {
  color: #d4b15f !important;
}
.column_our_team .icon_bar:hover i {
  color: #f2d37a !important;
}

/* =========================================================
   HOTFIX 1 — Featured cards chopped (no clipping)
   Paste at VERY END of custom.css
========================================================= */

/* Stop any theme wrapper from clipping the featured section */
.featured-pubs,
.featured-pubs .section_wrapper,
.featured-pubs .items_group,
.featured-pubs .featured-grid,
.featured-pubs .featured-grid > .column,
.featured-pubs .featured-grid > .column .column_attr,
.featured-link,
.featured-card {
  overflow: visible !important;
  min-height: 0 !important;
  height: auto !important;
}

/* Make sure the card itself determines its height */
.featured-card {
  height: 100% !important;   /* equal-height per row */
}

/* If the theme is forcing column_attr to a fixed height, this fixes it */
.featured-pubs .featured-grid > .column .column_attr.featured-card {
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
}

/* Ensure card content never gets clipped by inner wrappers */
.featured-card .pub-title,
.featured-card .pub-authors,
.featured-card .pub-meta {
  overflow: visible !important;
}

/* If the theme sets line-height weirdly, prevent collapse */
.featured-card .pub-authors,
.featured-card .pub-meta {
  white-space: normal !important;
}

/* =========================================================
   HOTFIX 2 — Members text missing again
   (force theme "team circle" content visible on dark)
========================================================= */

/* Force the team module to show text (some skins hide until hover/JS) */
.team.team_circle .desc_wrapper,
.team.team_circle .desc_wrapper * {
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
  height: auto !important;
  max-height: none !important;
  transform: none !important;
  position: relative !important;
  color: #e0e0e0 !important;
}

/* Ensure subtitle/desc are not being set to transparent/black */
.team.team_circle .subtitle,
.team.team_circle .desc,
.team.team_circle p,
.team.team_circle span,
.team.team_circle h4 {
  color: #e0e0e0 !important;
}

/* Some themes put an overlay or background behind the text */
.team.team_circle {
  background: transparent !important;
}

/* If theme uses hr_color with a background, ensure it stays visible */
.team.team_circle .hr_color {
  border-color: rgba(255,255,255,0.18) !important;
}

/* Make the email icon visible */
.team.team_circle .icon_bar i {
  color: #d4b15f !important;
}
.team.team_circle .icon_bar:hover i {
  color: #f2d37a !important;
}

/* =========================================================
   MEMBERS PAGE: FORCE TEXT TO SHOW (put at VERY END)
========================================================= */

/* Only target members page team blocks */
.column_our_team .team,
.column_our_team .team * {
  color: #e8e8e8 !important;
}

/* Theme sometimes fades/animates team text; force visibility */
.column_our_team .desc_wrapper,
.column_our_team .desc_wrapper * {
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
  transform: none !important;
  filter: none !important;
}

/* Ensure subtitle + desc inherit white (theme often forces gray/black) */
.column_our_team .subtitle,
.column_our_team .desc,
.column_our_team .desc a {
  color: #e8e8e8 !important;
}

/* Make the divider line visible on dark */
.column_our_team hr.hr_color {
  border-color: rgba(255,255,255,0.20) !important;
}

/* If the theme uses an overlay inside image_frame that covers content */
.column_our_team .team:before,
.column_our_team .team:after,
.column_our_team .image_frame:before,
.column_our_team .image_frame:after {
  display: none !important;
}

/* Make sure text sits above anything weird */
.column_our_team .desc_wrapper {
  position: relative !important;
  z-index: 5 !important;
}

/* Bigger fonts like home page scale */
.column_our_team h4 {
  font-size: calc(22px + (30 - 22) * ((100vw - 400px) / (1200 - 400))) !important;
  line-height: 1.15 !important;
  margin-bottom: 10px !important;
}

.column_our_team .subtitle {
  font-size: calc(16px + (20 - 16) * ((100vw - 400px) / (1200 - 400))) !important;
  line-height: 1.45 !important;
}

.column_our_team .desc {
  font-size: calc(16px + (19 - 16) * ((100vw - 400px) / (1200 - 400))) !important;
  line-height: 1.65 !important;
}

/* Email icon visibility */
.column_our_team .icon_bar i {
  color: #d4b15f !important;
}
.column_our_team .icon_bar:hover i {
  color: #f2d37a !important;
}

/* ===============================
   Header polish: structure + spacing
================================ */

/* Lab caption size/spacing for header */
.zlab_caption {
  font-size: clamp(26px, 3.2vw, 40px) !important;
  margin: 0 !important;
  line-height: 1.05 !important;
  letter-spacing: 0.5px;
}

/* If you have a second line under it (your publications page had one earlier),
   keep it small and subtle */
.logo p:not(.zlab_caption) {
  margin: 6px 0 0 0 !important;
  font-size: 14px !important;
  color: rgba(255,255,255,0.70) !important;
}

/* Menu spacing + hover */
#menu > ul > li > a {
  padding: 14px 12px !important;
  border-radius: 10px !important;
  transition: color 0.18s ease, background 0.18s ease, transform 0.15s ease;
}

#menu > ul > li > a span {
  letter-spacing: 0.3px;
  font-weight: 600;
}

/* Default */
#menu > ul > li > a,
#menu > ul > li > a span {
  color: rgba(255,255,255,0.88) !important;
}

/* Hover gold + subtle pill background */
#menu > ul > li > a:hover,
#menu > ul > li.current_page_item > a {
  color: #d4b15f !important;
  background: rgba(212,177,95,0.10) !important;
}

#menu > ul > li > a:hover {
  transform: translateY(-1px);
}

/* Reduce excess header height */
#Top_bar .container {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

#Top_bar .column.one {
  min-height: unset !important;
}

@media (max-width: 959px) {
  #Top_bar .top_bar_left {
    flex-wrap: wrap !important;
    justify-content: center !important;
  }

  .responsive-menu-toggle i {
    color: rgba(255,255,255,0.90) !important;
  }
}

/* =========================================================
   HOME: make "Mechanisms and Vulnerabilities..." stand out
   (subheader hero title under the banner)
========================================================= */

/* Make sure the subheader area is the positioning context */
#Subheader .container .column.one {
  position: relative !important;
}

/* Target the exact title line */
#Subheader h4.title {
  /* spacing */
  margin-top: -14px !important;     /* pull closer to banner */
  margin-bottom: 12px !important;

  /* typography */
  font-size: clamp(22px, 2.2vw, 34px) !important;
  font-weight: 800 !important;
  letter-spacing: 0.4px !important;
  line-height: 1.15 !important;
  text-align: center !important;

  /* color + emphasis */
  color: #ffffff !important;
  text-shadow: 0 6px 18px rgba(0,0,0,0.65) !important;

  /* “badge” style */
  display: inline-block !important;
  padding: 12px 18px !important;
  border-radius: 14px !important;
  background: rgba(0,0,0,0.55) !important;
  border: 1px solid rgba(255,255,255,0.14) !important;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

/* Center the badge even though it's inline-block */
#Subheader h4.title {
  left: 50%;
  transform: translateX(-50%);
  position: relative;
}

/* Add a gold underline accent */
#Subheader h4.title::after {
  content: "";
  display: block;
  width: min(220px, 70%);
  height: 3px;
  margin: 10px auto 0 auto;
  border-radius: 999px;
  background: rgba(212,177,95,0.95); /* gold */
  box-shadow: 0 0 18px rgba(212,177,95,0.22);
}

/* Optional: tighten banner bottom gap so title feels attached */
#Subheader img {
  margin-bottom: 16px !important;
}
